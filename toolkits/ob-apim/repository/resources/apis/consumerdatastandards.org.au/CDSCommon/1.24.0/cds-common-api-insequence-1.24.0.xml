<!--
  ~ Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com). All Rights Reserved.
  ~
  ~ This software is the property of WSO2 LLC. and its suppliers, if any.
  ~ Dissemination of any information or reproduction of any material contained
  ~ herein in any form is strictly forbidden, unless permitted by WSO2 expressly.
  ~ You may not alter or remove any copyright or other notice from copies of this content.
  ~
-->

<sequence xmlns="http://ws.apache.org/ns/synapse" name="cds-common-api-insequence-1.24.0">
    <!-- Set UUID if header is not present-->
    <property name="x-fapi-interaction-id" expression="fn:concat('',$trp:x-fapi-interaction-id)" />
    <filter xpath="$ctx:x-fapi-interaction-id = ''" >
        <then>
            <header name="x-fapi-interaction-id"
                    expression="fn:substring-after(get-property('MessageID'), 'urn:uuid:')" scope="transport"/>
        </then>
    </filter>
</sequence>
